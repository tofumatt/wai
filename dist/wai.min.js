(function(){"use strict";var a,b,c;b=this.navigator.mozApps,c=this.localStorage,a={install:function(){return function(a){var d;if(b&&!c._waiAttemptedAppInstall)return b?(d=b.getSelf(),d.addEventListener("success",function(){var e,f;if(!d.result)return window.addEventListener("beforeunload",function(){return c._waiAttemptedAppInstall=c._waiAttemptedAppInstall?(parseInt(c._waiAttemptedAppInstall,10)+1).toString():"1"}),a.manifest?(f=a.manifest,f.match(/^https?:\/\//)||(f=""+window.location.protocol+"//"+f)):f=""+window.location.protocol+"//"+window.location.host+"/manifest.webapp",e=b.install(f),e.addEventListener("success",function(b){return c._waiAppIsInstalled="1",a.success?a.success(b):void 0}),e.addEventListener("error",function(b){return a.error?a.error(b):void 0})})):void 0}}(this)},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.Wai=a}).call(this);