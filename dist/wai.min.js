(function(){"use strict";var a,b,c;b=this.navigator.mozApps,c=this.localStorage,a={install:function(a,d){var e,f;return"object"==typeof a&&(d=a,a=null),f=parseInt(c._waiAttemptedAppInstall,10)||0,!b||c._waiAttemptedAppInstall&&(d.onlyPromptOnce&&f||f>=d.numberOfPrompts)?void 0:b?(e=b.getSelf(),e.addEventListener("success",function(){var g,h;if(!e.result)return window.addEventListener("beforeunload",function(){return c._waiAttemptedAppInstall=c._waiAppIsInstalled?"0":(f+1).toString()}),a?(h=a,h.match(/^https?:\/\//)||(h=""+window.location.protocol+"//"+h)):h=""+window.location.protocol+"//"+window.location.host+"/manifest.webapp",g=b.install(h),g.addEventListener("success",function(){return c._waiAppIsInstalled="1",d.success?d.success(g.result,g):void 0}),g.addEventListener("error",function(){return d.error?d.error(g.result,g):void 0})})):void 0}},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.Wai=a}).call(this);