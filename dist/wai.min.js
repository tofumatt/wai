(function(){"use strict";var a,b,c;b=this.navigator.mozApps,c=this.localStorage,a={install:function(a){var d,e;return e=parseInt(c._waiAttemptedAppInstall,10)||0,!b||c._waiAttemptedAppInstall&&(a.onlyPromptOnce&&e||e>=a.numberOfPrompts)?void 0:b?(d=b.getSelf(),d.addEventListener("success",function(){var f,g;if(!d.result)return window.addEventListener("beforeunload",function(){return c._waiAttemptedAppInstall=c._waiAppIsInstalled?"0":(e+1).toString()}),a.manifest?(g=a.manifest,g.match(/^https?:\/\//)||(g=""+window.location.protocol+"//"+g)):g=""+window.location.protocol+"//"+window.location.host+"/manifest.webapp",f=b.install(g),f.addEventListener("success",function(){return parseInt(c._waiAttemptedAppInstall,10),c._waiAppIsInstalled="1",a.success?a.success(f.result,f):void 0}),f.addEventListener("error",function(){return a.error?a.error(f.result,f):void 0})})):void 0}},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.Wai=a}).call(this);